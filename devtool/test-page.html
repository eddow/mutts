<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Mutts DevTools Test Page</title>
    <style>
      body {
        font-family: system-ui, sans-serif;
        max-width: 800px;
        margin: 2rem auto;
        padding: 1rem;
      }

      button {
        padding: 0.5rem 1rem;
        margin: 0.5rem;
        font-size: 1rem;
        cursor: pointer;
      }

      pre {
        background: #f4f4f4;
        padding: 1rem;
        border-radius: 4px;
        overflow-x: auto;
      }
    </style>
  </head>

  <body>
    <h1>Mutts Reactivity DevTools Test</h1>
    <p>Open DevTools and look for the "Mutts Reactivity" tab.</p>

    <div>
      <button id="enable">Enable DevTools API</button>
      <button id="test">Create Test Effects</button>
      <button id="update">Update State</button>
    </div>

    <pre id="output"></pre>

    <script type="module">
      // Import Mutts (adjust path as needed)
      // For this demo, we'll simulate the API

      const output = document.getElementById('output');

      // Simulate reactive system
      const state = { name: 'Alice', age: 30 };
      const effects = [];

      function log(msg) {
        output.textContent += msg + '\n';
      }

      document.getElementById('enable').addEventListener('click', () => {
        // In a real app, you'd do: import { enableDevTools } from 'mutts'
        // For this demo, we'll create a mock API
        window.__MUTTS_DEBUG__ = {
          getGraph() {
            const nodes = [
              { id: 'effect_0', label: 'updateUser', type: 'effect', depth: 0, debugName: 'updateUser' },
              { id: 'effect_1', label: 'renderName', type: 'effect', depth: 1, debugName: 'renderName' },
              { id: 'effect_2', label: 'logAge', type: 'effect', depth: 1, debugName: 'logAge' },
              { id: 'effect_external', label: 'External', type: 'external', depth: 0 },
              { id: 'object_4', label: 'user', type: 'state', debugName: 'user' },
            ];
            const edges = [
              { id: 'e1', source: 'effect_0', target: 'object_4', type: 'dependency', label: 'depends' },
              { id: 'e2', source: 'effect_1', target: 'object_4', type: 'dependency', label: 'depends' },
              { id: 'e3', source: 'effect_external', target: 'effect_0', type: 'cause', label: 'user.name', count: 3 },
              { id: 'e4', source: 'effect_0', target: 'effect_1', type: 'cause', label: 'user.name' },
              { id: 'e5', source: 'effect_0', target: 'effect_2', type: 'cause', label: 'user.age' },
            ];
            return { nodes, edges, meta: { generatedAt: Date.now(), devtoolsEnabled: true } };
          },
          setEffectName(effect, name) {
            log(`Set effect name: ${name}`);
          },
          setObjectName(obj, name) {
            log(`Set object name: ${name}`);
          }
        };
        log('✓ DevTools API enabled at window.__MUTTS_DEBUG__');
      });

      document.getElementById('test').addEventListener('click', () => {
        log('Creating test effects...');
        // In real app, effects would be created here
        log('✓ Test effects created');
      });

      document.getElementById('update').addEventListener('click', () => {
        state.name = 'Bob';
        state.age = 31;
        log(`Updated: name=${state.name}, age=${state.age}`);
      });
    </script>
  </body>

</html>